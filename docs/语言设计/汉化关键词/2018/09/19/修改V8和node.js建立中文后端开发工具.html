<!DOCTYPE html>
<html lang="zh">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>修改V8和node.js建立中文后端开发工具</title>
  <meta name="description" content="修改V8编译器源码, 实现关键词的中文化. Modify source code of V8 JavaScript compiler to support keywords in Chinese.">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/%E8%AF%AD%E8%A8%80%E8%AE%BE%E8%AE%A1/%E6%B1%89%E5%8C%96%E5%85%B3%E9%94%AE%E8%AF%8D/2018/09/19/%E4%BF%AE%E6%94%B9V8%E5%92%8Cnode.js%E5%BB%BA%E7%AB%8B%E4%B8%AD%E6%96%87%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7.html">
  <link rel="alternate" type="application/rss+xml" title="用中文编程" href="/feed.xml">
  
  
  
  <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>修改V8和node.js建立中文后端开发工具 | 用中文编程</title>
<meta property="og:title" content="修改V8和node.js建立中文后端开发工具" />
<meta property="og:locale" content="zh" />
<meta name="description" content="修改V8编译器源码, 实现关键词的中文化. Modify source code of V8 JavaScript compiler to support keywords in Chinese." />
<meta property="og:description" content="修改V8编译器源码, 实现关键词的中文化. Modify source code of V8 JavaScript compiler to support keywords in Chinese." />
<link rel="canonical" href="http://localhost:4000/%E8%AF%AD%E8%A8%80%E8%AE%BE%E8%AE%A1/%E6%B1%89%E5%8C%96%E5%85%B3%E9%94%AE%E8%AF%8D/2018/09/19/%E4%BF%AE%E6%94%B9V8%E5%92%8Cnode.js%E5%BB%BA%E7%AB%8B%E4%B8%AD%E6%96%87%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7.html" />
<meta property="og:url" content="http://localhost:4000/%E8%AF%AD%E8%A8%80%E8%AE%BE%E8%AE%A1/%E6%B1%89%E5%8C%96%E5%85%B3%E9%94%AE%E8%AF%8D/2018/09/19/%E4%BF%AE%E6%94%B9V8%E5%92%8Cnode.js%E5%BB%BA%E7%AB%8B%E4%B8%AD%E6%96%87%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7.html" />
<meta property="og:site_name" content="用中文编程" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-19T00:00:00-07:00" />
<script type="application/ld+json">
{"name":null,"description":"修改V8编译器源码, 实现关键词的中文化. Modify source code of V8 JavaScript compiler to support keywords in Chinese.","author":null,"@type":"BlogPosting","url":"http://localhost:4000/%E8%AF%AD%E8%A8%80%E8%AE%BE%E8%AE%A1/%E6%B1%89%E5%8C%96%E5%85%B3%E9%94%AE%E8%AF%8D/2018/09/19/%E4%BF%AE%E6%94%B9V8%E5%92%8Cnode.js%E5%BB%BA%E7%AB%8B%E4%B8%AD%E6%96%87%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7.html","publisher":null,"image":null,"headline":"修改V8和node.js建立中文后端开发工具","dateModified":"2018-09-19T00:00:00-07:00","datePublished":"2018-09-19T00:00:00-07:00","sameAs":null,"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/%E8%AF%AD%E8%A8%80%E8%AE%BE%E8%AE%A1/%E6%B1%89%E5%8C%96%E5%85%B3%E9%94%AE%E8%AF%8D/2018/09/19/%E4%BF%AE%E6%94%B9V8%E5%92%8Cnode.js%E5%BB%BA%E7%AB%8B%E4%B8%AD%E6%96%87%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <style>
    #搜索区 {
      max-width: 40em;
      padding: 1em;
      margin: 1em auto;
      border: 1px solid lightgrey;
    }
    #搜索输入 {
      display: inline-block;
      padding: .5em;
      width: 100%;
      font-size: 0.8em;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
    }
  </style>
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">用中文编程</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
          
            
            
          
            
            
            <a class="page-link" href="/%E5%85%B3%E4%BA%8E/">关于</a>
            
          
            
            
            <a class="page-link" href="/%E6%95%99%E7%A8%8B_%E7%AC%94%E8%AE%B0/">教程/笔记</a>
            
          
            
            
            <a class="page-link" href="/%E5%91%A8%E6%8A%A5/">讨论组周报</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>

    <a href="https://github.com/program-in-chinese/team_website"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>
    
    <div id="搜索区">
      <input type="text" id="搜索输入" placeholder="搜索...">
      <ul id="搜索结果"></ul>
    </div>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">修改V8和node.js建立中文后端开发工具</h1>
    <p class="post-meta">
      <time datetime="2018-09-19T00:00:00-07:00" itemprop="datePublished">
        
        Sep 19, 2018
      </time>
      </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>本文github: https://github.com/swizl/zwnode</p>

<p>一. 修改V8</p>

<p>V8在一个文件里改就行了。</p>

<p>\deps\v8\src\parsing\scanner.cc</p>

<ol>
  <li>从llvm中下一个轮子过来的StringSwitch，当然要改一下。StringRef改成std::wstring, 多余的功能去掉。放在 scanner.cc 开头。</li>
</ol>

<p><a href="https://zhuanlan.zhihu.com/p/31158537">狗屎咖啡：为clang添加中文关键字​</a></p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">R</span> <span class="o">=</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">StringSwitch</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">wstring</span> <span class="n">Str</span><span class="p">;</span>
  <span class="k">const</span> <span class="n">T</span> <span class="o">*</span><span class="n">Result</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
  <span class="c1">//
</span>  <span class="k">explicit</span> <span class="n">StringSwitch</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">wstring</span> <span class="n">S</span><span class="p">)</span>
  <span class="o">:</span> <span class="n">Str</span><span class="p">(</span><span class="n">S</span><span class="p">),</span> <span class="n">Result</span><span class="p">(</span><span class="nb">nullptr</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="c1">// StringSwitch is not copyable.
</span>  <span class="n">StringSwitch</span><span class="p">(</span><span class="k">const</span> <span class="n">StringSwitch</span> <span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
  <span class="kt">void</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">StringSwitch</span> <span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>

  <span class="n">StringSwitch</span><span class="p">(</span><span class="n">StringSwitch</span> <span class="o">&amp;&amp;</span><span class="n">other</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">*</span><span class="k">this</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">other</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">StringSwitch</span> <span class="o">&amp;</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">StringSwitch</span> <span class="o">&amp;&amp;</span><span class="n">other</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Str</span> <span class="o">=</span> <span class="n">other</span><span class="p">.</span><span class="n">Str</span><span class="p">;</span>
    <span class="n">Result</span> <span class="o">=</span> <span class="n">other</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="o">~</span><span class="n">StringSwitch</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>

  <span class="c1">// Case-sensitive case matchers
</span>  <span class="k">template</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="n">N</span><span class="o">&gt;</span>
  <span class="n">StringSwitch</span><span class="o">&amp;</span> <span class="n">Case</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">S</span><span class="p">)[</span><span class="n">N</span><span class="p">],</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">Value</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">N</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">Result</span> <span class="o">&amp;&amp;</span> <span class="n">N</span><span class="o">-</span><span class="mi">1</span> <span class="o">==</span> <span class="n">Str</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
        <span class="c1">//(N == 1 || std::memcmp(S, Str.data(), (N-1)*sizeof(wchar_t)) == 0)) {
</span>        <span class="p">(</span><span class="n">N</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">Str</span><span class="p">.</span><span class="n">compare</span><span class="p">(</span><span class="n">S</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">Result</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">Value</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">R</span> <span class="n">Default</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">Value</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Result</span><span class="p">)</span>
      <span class="k">return</span> <span class="o">*</span><span class="n">Result</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">Value</span><span class="p">;</span>
  <span class="p">}</span>

  
  <span class="k">operator</span> <span class="n">R</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">Result</span> <span class="o">&amp;&amp;</span> <span class="s">"Fell off the end of a string-switch"</span><span class="p">);</span>
    <span class="k">return</span> <span class="o">*</span><span class="n">Result</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<ol>
  <li>加上中文的关键字和英文关键字一样对应, 可以根据自己的喜好随便改。
    <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define KEYWORDS(KEYWORD_GROUP, KEYWORD, ZWKEYWORD)                    \
  KEYWORD_GROUP('a')                                        \
  KEYWORD("arguments", Token::ARGUMENTS)                    \
  ZWKEYWORD("诸参", Token::ARGUMENTS)                    \
  KEYWORD("as", Token::AS)                                  \
  ZWKEYWORD("以", Token::AS)                                  \
  KEYWORD("async", Token::ASYNC)                            \
  ZWKEYWORD("异", Token::ASYNC)                            \
  KEYWORD("await", Token::AWAIT)                            \
  ZWKEYWORD("等", Token::AWAIT)                            \
  KEYWORD("anonymous", Token::ANONYMOUS)                    \
  ZWKEYWORD("匿", Token::ANONYMOUS)                    \
  KEYWORD_GROUP('b')                                        \
  KEYWORD("break", Token::BREAK)                            \
  ZWKEYWORD("破", Token::BREAK)                            \
  KEYWORD_GROUP('c')                                        \
  KEYWORD("case", Token::CASE)                              \
  ZWKEYWORD("例", Token::CASE)                              \
  KEYWORD("catch", Token::CATCH)                            \
  ZWKEYWORD("捕", Token::CATCH)                            \
  KEYWORD("class", Token::CLASS)                            \
  ZWKEYWORD("类", Token::CLASS)                            \
  KEYWORD("const", Token::CONST)                            \
  ZWKEYWORD("常", Token::CONST)                            \
  KEYWORD("constructor", Token::CONSTRUCTOR)                \
  ZWKEYWORD("构造器", Token::CONSTRUCTOR)                \
  KEYWORD("continue", Token::CONTINUE)                      \
  ZWKEYWORD("继", Token::CONTINUE)                      \
  KEYWORD_GROUP('d')                                        \
  KEYWORD("debugger", Token::DEBUGGER)                      \
  ZWKEYWORD("调试器", Token::DEBUGGER)                      \
  KEYWORD("default", Token::DEFAULT)                        \
  ZWKEYWORD("默", Token::DEFAULT)                        \
  KEYWORD("delete", Token::DELETE)                          \
  ZWKEYWORD("删", Token::DELETE)                          \
  KEYWORD("do", Token::DO)                                  \
  ZWKEYWORD("行", Token::DO)                                  \
  KEYWORD_GROUP('e')                                        \
  KEYWORD("else", Token::ELSE)                              \
  ZWKEYWORD("另", Token::ELSE)                              \
  KEYWORD("enum", Token::ENUM)                              \
  ZWKEYWORD("举", Token::ENUM)                              \
  KEYWORD("eval", Token::EVAL)                              \
  ZWKEYWORD("估", Token::EVAL)                              \
  KEYWORD("export", Token::EXPORT)                          \
  ZWKEYWORD("导", Token::EXPORT)                          \
  KEYWORD("extends", Token::EXTENDS)                        \
  ZWKEYWORD("承", Token::EXTENDS)                        \
  KEYWORD_GROUP('f')                                        \
  KEYWORD("false", Token::FALSE_LITERAL)                    \
  ZWKEYWORD("假", Token::FALSE_LITERAL)                    \
  KEYWORD("finally", Token::FINALLY)                        \
  ZWKEYWORD("末", Token::FINALLY)                        \
  KEYWORD("for", Token::FOR)                                \
  ZWKEYWORD("于", Token::FOR)                                \
  KEYWORD("from", Token::FROM)                              \
  ZWKEYWORD("从", Token::FROM)                              \
  KEYWORD("function", Token::FUNCTION)                      \
  ZWKEYWORD("函数", Token::FUNCTION)                      \
  KEYWORD_GROUP('g')                                        \
  KEYWORD("get", Token::GET)                                \
  ZWKEYWORD("取", Token::GET)                                \
  KEYWORD_GROUP('i')                                        \
  KEYWORD("if", Token::IF)                                  \
  ZWKEYWORD("如", Token::IF)                                  \
  KEYWORD("implements", Token::FUTURE_STRICT_RESERVED_WORD) \
  ZWKEYWORD("成", Token::FUTURE_STRICT_RESERVED_WORD) \
  KEYWORD("import", Token::IMPORT)                          \
  ZWKEYWORD("引", Token::IMPORT)                          \
  KEYWORD("in", Token::IN)                                  \
  ZWKEYWORD("在", Token::IN)                                  \
  KEYWORD("instanceof", Token::INSTANCEOF)                  \
  ZWKEYWORD("是为", Token::INSTANCEOF)                  \
  KEYWORD("interface", Token::FUTURE_STRICT_RESERVED_WORD)  \
  ZWKEYWORD("接", Token::FUTURE_STRICT_RESERVED_WORD)  \
  KEYWORD_GROUP('l')                                        \
  KEYWORD("let", Token::LET)                                \
  ZWKEYWORD("让", Token::LET)                                \
  KEYWORD_GROUP('m')                                        \
  KEYWORD("meta", Token::META)                              \
  ZWKEYWORD("元", Token::META)                                \
  KEYWORD_GROUP('n')                                        \
  KEYWORD("name", Token::NAME)                              \
  ZWKEYWORD("名", Token::NAME)                              \
  KEYWORD("new", Token::NEW)                                \
  ZWKEYWORD("新", Token::NEW)                                \
  KEYWORD("null", Token::NULL_LITERAL)                      \
  ZWKEYWORD("无", Token::NULL_LITERAL)                      \
  KEYWORD_GROUP('o')                                        \
  KEYWORD("of", Token::OF)                                  \
  ZWKEYWORD("之", Token::OF)                                  \
  KEYWORD_GROUP('p')                                        \
  KEYWORD("package", Token::FUTURE_STRICT_RESERVED_WORD)    \
  ZWKEYWORD("包", Token::FUTURE_STRICT_RESERVED_WORD)    \
  KEYWORD("private", Token::FUTURE_STRICT_RESERVED_WORD)    \
  ZWKEYWORD("私", Token::FUTURE_STRICT_RESERVED_WORD)    \
  KEYWORD("protected", Token::FUTURE_STRICT_RESERVED_WORD)  \
  ZWKEYWORD("保", Token::FUTURE_STRICT_RESERVED_WORD)  \
  KEYWORD("prototype", Token::PROTOTYPE)                    \
  ZWKEYWORD("原型", Token::PROTOTYPE)                    \
  KEYWORD("public", Token::FUTURE_STRICT_RESERVED_WORD)     \
  ZWKEYWORD("公", Token::FUTURE_STRICT_RESERVED_WORD)     \
  KEYWORD_GROUP('r')                                        \
  KEYWORD("return", Token::RETURN)                          \
  ZWKEYWORD("返", Token::RETURN)                          \
  KEYWORD_GROUP('s')                                        \
  KEYWORD("set", Token::SET)                                \
  ZWKEYWORD("设", Token::SET)                                \
  KEYWORD("static", Token::STATIC)                          \
  ZWKEYWORD("固", Token::STATIC)                          \
  KEYWORD("super", Token::SUPER)                            \
  ZWKEYWORD("超", Token::SUPER)                            \
  KEYWORD("switch", Token::SWITCH)                          \
  ZWKEYWORD("切", Token::SWITCH)                          \
  KEYWORD_GROUP('t')                                        \
  KEYWORD("target", Token::TARGET)                          \
  ZWKEYWORD("标", Token::TARGET)                          \
  KEYWORD("this", Token::THIS)                              \
  ZWKEYWORD("此", Token::THIS)                              \
  KEYWORD("throw", Token::THROW)                            \
  ZWKEYWORD("抛", Token::THROW)                            \
  KEYWORD("true", Token::TRUE_LITERAL)                      \
  ZWKEYWORD("真", Token::TRUE_LITERAL)                      \
  KEYWORD("try", Token::TRY)                                \
  ZWKEYWORD("试", Token::TRY)                                \
  KEYWORD("typeof", Token::TYPEOF)                          \
  ZWKEYWORD("之型", Token::TYPEOF)                          \
  KEYWORD_GROUP('u')                                        \
  KEYWORD("undefined", Token::UNDEFINED)                    \
  ZWKEYWORD("未定", Token::UNDEFINED)                    \
  KEYWORD_GROUP('v')                                        \
  KEYWORD("var", Token::VAR)                                \
  ZWKEYWORD("变", Token::VAR)                                \
  KEYWORD("void", Token::VOID)                              \
  ZWKEYWORD("空", Token::VOID)                              \
  KEYWORD_GROUP('w')                                        \
  KEYWORD("while", Token::WHILE)                            \
  ZWKEYWORD("当", Token::WHILE)                            \
  KEYWORD("with", Token::WITH)                              \
  ZWKEYWORD("为之", Token::WITH)                              \
  KEYWORD_GROUP('y')                                        \
  KEYWORD("yield", Token::YIELD)                            \
  ZWKEYWORD("降", Token::YIELD)                            \
  KEYWORD_GROUP('_')                                        \
  KEYWORD("__proto__", Token::PROTO_UNDERSCORED)            \
  ZWKEYWORD("__原__", Token::PROTO_UNDERSCORED)              \
  KEYWORD_GROUP('#')                                        \
  KEYWORD("#constructor", Token::PRIVATE_CONSTRUCTOR)        \
  ZWKEYWORD("#构造器", Token::PRIVATE_CONSTRUCTOR)
</span></code></pre></div>    </div>
  </li>
</ol>

<p>3.仿照KeywordOrIdentifierToken写一个ZWKeywordOrIdentifierToken</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="n">Token</span><span class="o">::</span><span class="n">Value</span> <span class="n">KeywordOrIdentifierToken</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">input</span><span class="p">,</span>
                                             <span class="kt">int</span> <span class="n">input_length</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">DCHECK_GE</span><span class="p">(</span><span class="n">input_length</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">const</span> <span class="kt">int</span> <span class="n">kMinLength</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="k">const</span> <span class="kt">int</span> <span class="n">kMaxLength</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">input_length</span> <span class="o">&lt;</span> <span class="n">kMinLength</span> <span class="o">||</span> <span class="n">input_length</span> <span class="o">&gt;</span> <span class="n">kMaxLength</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Token</span><span class="o">::</span><span class="n">IDENTIFIER</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">default</span><span class="o">:</span>
<span class="cp">#define ZWKEYWORD(keyword, token)
#define KEYWORD_GROUP_CASE(ch)                                \
      break;                                                  \
    case ch:
#define KEYWORD(keyword, token)                                           \
  {                                                                       \
    </span><span class="cm">/* 'keyword' is a char array, so sizeof(keyword) is */</span><span class="cp">                \
    </span><span class="cm">/* strlen(keyword) plus 1 for the NUL char. */</span><span class="cp">                        \
    const int keyword_length = sizeof(keyword) - 1;                       \
    STATIC_ASSERT(keyword_length &gt;= kMinLength);                          \
    STATIC_ASSERT(keyword_length &lt;= kMaxLength);                          \
    DCHECK_EQ(input[0], keyword[0]);                                      \
    DCHECK(token == Token::FUTURE_STRICT_RESERVED_WORD ||                 \
           0 == strncmp(keyword, Token::String(token), sizeof(keyword))); \
    if (input_length == keyword_length &amp;&amp; input[1] == keyword[1] &amp;&amp;       \
        (keyword_length &lt;= 2 || input[2] == keyword[2]) &amp;&amp;                \
        (keyword_length &lt;= 3 || input[3] == keyword[3]) &amp;&amp;                \
        (keyword_length &lt;= 4 || input[4] == keyword[4]) &amp;&amp;                \
        (keyword_length &lt;= 5 || input[5] == keyword[5]) &amp;&amp;                \
        (keyword_length &lt;= 6 || input[6] == keyword[6]) &amp;&amp;                \
        (keyword_length &lt;= 7 || input[7] == keyword[7]) &amp;&amp;                \
        (keyword_length &lt;= 8 || input[8] == keyword[8]) &amp;&amp;                \
        (keyword_length &lt;= 9 || input[9] == keyword[9]) &amp;&amp;                \
        (keyword_length &lt;= 10 || input[10] == keyword[10])) {             \
      return token;                                                       \
    }                                                                     \
  }
</span>      <span class="n">KEYWORDS</span><span class="p">(</span><span class="n">KEYWORD_GROUP_CASE</span><span class="p">,</span> <span class="n">KEYWORD</span><span class="p">,</span> <span class="n">ZWKEYWORD</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">Token</span><span class="o">::</span><span class="n">IDENTIFIER</span><span class="p">;</span>
<span class="c1">//#undef KEYWORDS
</span><span class="cp">#undef KEYWORD
#undef KEYWORD_GROUP_CASE
#undef ZWKEYWORD
</span><span class="p">}</span>

<span class="cp">#define IS_WCHAR_EQ_U16() (sizeof(wchar_t) == sizeof(uint16_t))
</span><span class="k">static</span> <span class="n">Token</span><span class="o">::</span><span class="n">Value</span> <span class="n">ZWKeywordOrIdentifierToken</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint16_t</span><span class="o">*</span> <span class="n">input</span><span class="p">,</span>
                                             <span class="kt">int</span> <span class="n">input_length</span><span class="p">)</span> <span class="p">{</span>

<span class="cp">#define ZWKEYWORD(keyword, token) .Case(L##keyword, token)
#define KEYWORD_GROUP_CASE(ch)
#define KEYWORD(keyword, token)
</span>		<span class="n">std</span><span class="o">::</span><span class="n">wstring</span> <span class="n">temp_input</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">IS_WCHAR_EQ_U16</span><span class="p">())</span>
			<span class="n">temp_input</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="p">)</span><span class="n">input</span><span class="p">,</span> <span class="n">input_length</span><span class="p">);</span>
		<span class="k">else</span> <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">input_length</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
			<span class="n">temp_input</span><span class="p">.</span><span class="n">push_back</span><span class="p">((</span><span class="kt">wchar_t</span><span class="p">)</span><span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
		<span class="k">return</span> <span class="n">StringSwitch</span><span class="o">&lt;</span><span class="n">Token</span><span class="o">::</span><span class="n">Value</span><span class="o">&gt;</span><span class="p">(</span><span class="n">temp_input</span><span class="p">)</span>
		<span class="n">KEYWORDS</span><span class="p">(</span><span class="n">KEYWORD_GROUP_CASE</span><span class="p">,</span> <span class="n">KEYWORD</span><span class="p">,</span> <span class="n">ZWKEYWORD</span><span class="p">)</span>
			<span class="p">.</span><span class="n">Default</span><span class="p">(</span><span class="n">Token</span><span class="o">::</span><span class="n">IDENTIFIER</span><span class="p">);</span>
<span class="cp">#undef KEYWORD
#undef KEYWORD_GROUP_CASE
#undef ZWKEYWORD
#undef KEYWORDS
</span><span class="p">}</span>
</code></pre></div></div>

<ol>
  <li>在 ScanIdentifierOrKeywordInner 或 ScanIdentifierOrKeyword 中添加中文关键字返回token的逻辑，</li>
</ol>

<p>node.js的稳点版，改点在ScanIdentifierOrKeyword中：</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="p">(</span><span class="n">next_</span><span class="p">.</span><span class="n">literal_chars</span><span class="o">-&gt;</span><span class="n">is_one_byte</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">next_</span><span class="p">.</span><span class="n">literal_chars</span><span class="o">-&gt;</span><span class="n">one_byte_literal</span><span class="p">();</span>
    <span class="n">Token</span><span class="o">::</span><span class="n">Value</span> <span class="n">token</span> <span class="o">=</span>
        <span class="n">KeywordOrIdentifierToken</span><span class="p">(</span><span class="n">chars</span><span class="p">.</span><span class="n">start</span><span class="p">(),</span> <span class="n">chars</span><span class="p">.</span><span class="n">length</span><span class="p">());</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">IDENTIFIER</span> <span class="o">||</span>
        <span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">FUTURE_STRICT_RESERVED_WORD</span> <span class="o">||</span>
        <span class="n">Token</span><span class="o">::</span><span class="n">IsContextualKeyword</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
      <span class="n">literal</span><span class="p">.</span><span class="n">Complete</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">token</span><span class="p">;</span>
  <span class="p">}</span>  <span class="k">else</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">uint16_t</span><span class="o">&gt;</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">next_</span><span class="p">.</span><span class="n">literal_chars</span><span class="o">-&gt;</span><span class="n">two_byte_literal</span><span class="p">();</span>
    <span class="n">Token</span><span class="o">::</span><span class="n">Value</span> <span class="n">token</span> <span class="o">=</span>
        <span class="n">ZWKeywordOrIdentifierToken</span><span class="p">(</span><span class="n">chars</span><span class="p">.</span><span class="n">start</span><span class="p">(),</span> <span class="n">chars</span><span class="p">.</span><span class="n">length</span><span class="p">());</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">IDENTIFIER</span> <span class="o">||</span>
        <span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">FUTURE_STRICT_RESERVED_WORD</span> <span class="o">||</span>
        <span class="n">Token</span><span class="o">::</span><span class="n">IsContextualKeyword</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
      <span class="n">literal</span><span class="p">.</span><span class="n">Complete</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">token</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>node.js在github上的master，改点在ScanIdentifierOrKeywordInner中：</p>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">next_</span><span class="p">.</span><span class="n">literal_chars</span><span class="o">-&gt;</span><span class="n">is_one_byte</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">next_</span><span class="p">.</span><span class="n">literal_chars</span><span class="o">-&gt;</span><span class="n">one_byte_literal</span><span class="p">();</span>
    <span class="n">Token</span><span class="o">::</span><span class="n">Value</span> <span class="n">token</span> <span class="o">=</span>
        <span class="n">KeywordOrIdentifierToken</span><span class="p">(</span><span class="n">chars</span><span class="p">.</span><span class="n">start</span><span class="p">(),</span> <span class="n">chars</span><span class="p">.</span><span class="n">length</span><span class="p">());</span>
    <span class="cm">/* TODO(adamk): YIELD should be handled specially. */</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">FUTURE_STRICT_RESERVED_WORD</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">literal</span><span class="o">-&gt;</span><span class="n">Complete</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">escaped</span><span class="p">)</span> <span class="k">return</span> <span class="n">Token</span><span class="o">::</span><span class="n">ESCAPED_STRICT_RESERVED_WORD</span><span class="p">;</span>
      <span class="k">return</span> <span class="n">token</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">IDENTIFIER</span> <span class="o">||</span> <span class="n">Token</span><span class="o">::</span><span class="n">IsContextualKeyword</span><span class="p">(</span><span class="n">token</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">literal</span><span class="o">-&gt;</span><span class="n">Complete</span><span class="p">();</span>
      <span class="k">return</span> <span class="n">token</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">escaped</span><span class="p">)</span> <span class="k">return</span> <span class="n">token</span><span class="p">;</span>

    <span class="n">literal</span><span class="o">-&gt;</span><span class="n">Complete</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">LET</span> <span class="o">||</span> <span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">STATIC</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">Token</span><span class="o">::</span><span class="n">ESCAPED_STRICT_RESERVED_WORD</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">Token</span><span class="o">::</span><span class="n">ESCAPED_KEYWORD</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">next_</span><span class="p">.</span><span class="n">literal_chars</span><span class="o">-&gt;</span><span class="n">two_byte_literal</span><span class="p">();</span>
    <span class="n">Token</span><span class="o">::</span><span class="n">Value</span> <span class="n">token</span> <span class="o">=</span>
        <span class="n">ZWKeywordOrIdentifierToken</span><span class="p">(</span><span class="n">chars</span><span class="p">.</span><span class="n">start</span><span class="p">(),</span> <span class="n">chars</span><span class="p">.</span><span class="n">length</span><span class="p">());</span>
    <span class="cm">/* TODO(adamk): YIELD should be handled specially. */</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">FUTURE_STRICT_RESERVED_WORD</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">literal</span><span class="o">-&gt;</span><span class="n">Complete</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">escaped</span><span class="p">)</span> <span class="k">return</span> <span class="n">Token</span><span class="o">::</span><span class="n">ESCAPED_STRICT_RESERVED_WORD</span><span class="p">;</span>
      <span class="k">return</span> <span class="n">token</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">IDENTIFIER</span> <span class="o">||</span> <span class="n">Token</span><span class="o">::</span><span class="n">IsContextualKeyword</span><span class="p">(</span><span class="n">token</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">literal</span><span class="o">-&gt;</span><span class="n">Complete</span><span class="p">();</span>
      <span class="k">return</span> <span class="n">token</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">escaped</span><span class="p">)</span> <span class="k">return</span> <span class="n">token</span><span class="p">;</span>

    <span class="n">literal</span><span class="o">-&gt;</span><span class="n">Complete</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">LET</span> <span class="o">||</span> <span class="n">token</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">STATIC</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">Token</span><span class="o">::</span><span class="n">ESCAPED_STRICT_RESERVED_WORD</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">Token</span><span class="o">::</span><span class="n">ESCAPED_KEYWORD</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>二. 修改node.js的 js库，对内置对象和函数添加中文名称</p>

<p>修改实例：</p>

<p>添加 “控制台.日志” 等效 “console.log”</p>

<p>1.添加 “console” 中文名 “控制台”.</p>

<p>lib\internal\bootstrap\node.js // github master</p>

<p>lib\internal\bootstrap_node.js // web download</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nb">global</span><span class="p">,</span> <span class="s1">'console'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">configurable</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">enumerable</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="kd">get</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">wrappedConsole</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="c1">// 仿照添加 “控制台” 等效 “console”</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nb">global</span><span class="p">,</span> <span class="s1">'控制台'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">configurable</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">enumerable</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="kd">get</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">wrappedConsole</span><span class="p">;</span>
       <span class="p">}</span>
    <span class="p">});</span>
</code></pre></div></div>

<ol>
  <li>添加 “log” 函数中文名 “日志”</li>
</ol>

<p>lib\console.js:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Console</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">debug</span> <span class="o">=</span> <span class="nx">Console</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">log</span><span class="p">;</span>
<span class="c1">// 仿照debug和info，添加一条“日志” 等效 “log”</span>
<span class="nx">Console</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="err">日志</span> <span class="o">=</span> <span class="nx">Console</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">log</span><span class="p">;</span>

<span class="nx">Console</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">info</span> <span class="o">=</span> <span class="nx">Console</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">log</span><span class="p">;</span>
</code></pre></div></div>

<p>三 编译</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./configure
make all
</code></pre></div></div>

<p>四 运行实例：</p>

<p>hello.js //放在了 out/Release 中</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">函数</span> <span class="err">说</span><span class="mi">1</span><span class="p">(</span><span class="err">词</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">控制台</span><span class="p">.</span><span class="err">日志</span><span class="p">(</span><span class="err">词</span><span class="p">);</span>
<span class="p">}</span>
<span class="err">函数</span> <span class="err">执行</span><span class="p">(</span><span class="err">某函数</span><span class="p">,</span> <span class="err">值</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">某函数</span><span class="p">(</span><span class="err">值</span><span class="p">);</span>
<span class="p">}</span>
<span class="err">变</span> <span class="err">你</span> <span class="o">=</span> <span class="s2">"你"</span><span class="p">;</span>
<span class="err">变</span> <span class="err">哈哈</span> <span class="o">=</span> <span class="p">{</span>
    <span class="err">哈</span><span class="mi">1</span><span class="p">:</span> <span class="s1">'好'</span><span class="p">,</span>
     <span class="err">哈</span><span class="mi">2</span><span class="p">:</span> <span class="mi">12</span>
<span class="p">}</span>

<span class="err">执行</span><span class="p">(</span><span class="err">说</span><span class="mi">1</span><span class="p">,</span> <span class="err">你</span><span class="p">);</span>
<span class="err">控制台</span><span class="p">.</span><span class="err">日志</span><span class="p">(</span><span class="err">哈哈</span><span class="p">);</span>
</code></pre></div></div>
<p>运行:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd out/Release
./node hello.js
</code></pre></div></div>
<p>结果:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>你
{ '哈1': '好', '哈2': 12 }
</code></pre></div></div>


  </div>

  
    

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">用中文编程</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              用中文编程
            
            </li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/program-in-chinese"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">program-in-chinese</span></a>

          </li>
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>尽量用中文编写代码. 包括中文命名, 汉化库, 汉化关键词, 新创中文语法的编程语言等等. Program in Chinese wherever possible. Including using Chinese naming in code, making API in Chinese, supporting Chinese keywords in existing programming languages, and creating new programming languages with Chinese grammar.</p>
      </div>
    </div>

  </div>

</footer>

    <script src="/js/simple-jekyll-search.min.js"></script>

    <script>
      window.simpleJekyllSearch = new SimpleJekyllSearch({
        searchInput: document.getElementById('搜索输入'),
        resultsContainer: document.getElementById('搜索结果'),
        json: '/search.json',
        searchResultTemplate: '<li><a href="{url}?query={query}" title="{desc}">{title}</a></li>',
        noResultsText: '未找到相关文章',
        limit: 100,
        fuzzy: false,
        exclude: ['Welcome']
      })
    </script>
  </body>

</html>
